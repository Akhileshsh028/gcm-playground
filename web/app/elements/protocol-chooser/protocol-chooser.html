<dom-module id="protocol-chooser">

  <style>
    :host {
      display: block;
    }
  </style>

  <template>
    <paper-radio-group id="protocol" on-change="protocolChangeHandler">
      <paper-radio-button name="http" disabled="{{disableHttp}}">HTTP</paper-radio-button>
      <paper-radio-button name="xmpp" disabled="{{disableXmpp}}">XMPP</paper-radio-button>
    </paper-radio-group>
  </template>

  <script>

    (function () {
      Polymer({

        is: 'protocol-chooser',


        properties: {

          disableHttp: {
            type: Boolean,
            value: false,
            reflectToAttribute: true
          },

          disableXmpp: {
            type: Boolean,
            value: false,
            reflectToAttribute: true
          }

        },


        _log: function(msg) {
          log('protocol-chooser', msg);
        },


        /**
         * Handles the selection of the downstream message protocol.
         */
        protocolChangeHandler: function(e) {
          var selectedProtocol = e.target.attributes.name.value;
          this._log("Selected " + selectedProtocol);
          this.fire('protocol-changed', { choice: selectedProtocol });
        },


        /**
         * Deselects all protocol options.
         */
        reset: function() {
          this._log('Deselecting all protocols.');
          Polymer.dom(this.$.protocol)
                 .querySelectorAll('paper-radio-button[checked]')
                 .map(function(checkbox) {
                   checkbox.attributes.removeNamedItem('checked');
                 });
        }

      });
    })();

  </script>

</dom-module>
